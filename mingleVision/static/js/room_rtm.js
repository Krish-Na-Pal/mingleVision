let handleMemberJoined=async e=>{addMemberToDom(e);let t=await channel.getMembers();updateMemberTotal(t);let{name:a}=await rtmClient.getUserAttributesByKeys(e,["name"]);addBotMessageToDom(`Welcome to the room ${a}.`)},addMemberToDom=async e=>{let{name:t}=await rtmClient.getUserAttributesByKeys(e,["name"]),a=`<div class="member__wrapper" id="member__${e}__wrapper">\n                        <span class="green__icon"></span>\n                        <p class="member_name">${t}</p>\n                    </div>`;document.getElementById("member__list").insertAdjacentHTML("beforeend",a)},updateMemberTotal=async e=>{document.getElementById("members__count").innerText=e.length},handleMemberLeft=async e=>{removeMemberFromDom(e);let t=await channel.getMembers();updateMemberTotal(t)},removeMemberFromDom=async e=>{let t=document.getElementById(`member__${e}__wrapper`),a=t.getElementsByClassName("member_name")[0].textContent;addBotMessageToDom(`${a} has left the room.`),t.remove()},getMembers=async()=>{let e=await channel.getMembers();updateMemberTotal(e);for(let t=0;e.length>t;t++)addMemberToDom(e[t])},handleChannelMessage=async(e,t)=>{let a=JSON.parse(e.text);if("chat"===a.type&&addMessageToDom(a.displayName,a.message),"user_left"===a.type&&(document.getElementById(`user-container-${a.uid}`).remove(),userIdInDisplayFrame===`user-container-${uid}`)){displayFrame.style.display=null;for(let e=0;videoFrames.length>e;e++)videoFrames[e].style.height="300px",videoFrames[e].style.width="300px"}},sendMessage=async e=>{e.preventDefault();let t=e.target.message.value;channel.sendMessage({text:JSON.stringify({type:"chat",message:t,displayName:displayName})}),addMessageToDom(displayName,t),e.target.reset()},addMessageToDom=(e,t)=>{let a=`<div class="message__wrapper">\n                        <div class="message__body">\n                            <strong class="message__author">${e}</strong>\n                            <p class="message__text">${t}</p>\n                        </div>\n                    </div>`;document.getElementById("messages").insertAdjacentHTML("beforeend",a);let s=document.querySelector("#messages .message__wrapper:last-child");s&&s.scrollIntoView()},addBotMessageToDom=e=>{let t=`<div class="message__wrapper">\n                        <div class="message__body__bot">\n                            \n                            <p class="message__text__bot">${e}</p>\n                        </div>\n                    </div>`;document.getElementById("messages").insertAdjacentHTML("beforeend",t);let a=document.querySelector("#messages .message__wrapper:last-child");a&&a.scrollIntoView()},leaveChannel=async()=>{localStorage.removeItem("startTime"),await channel.leave(),await rtmClient.logout()};window.addEventListener("beforeunload",leaveChannel);let messageForm=document.getElementById("message__form");messageForm.addEventListener("submit",sendMessage);let initVolumeIndicator=async()=>{AgoraRTC.setParameter("AUDIO_VOLUME_INDICATION_INTERVAL",200),client.enableAudioVolumeIndicator(),client.on("volume-indicator",(e=>{e.forEach((e=>{try{let t=document.getElementsByClassName(`user-rtc-${e.uid}`)[0];e.level>=15?t.textContent="ðŸ”Š":e.level>=10&&e.level<15?t.textContent="ðŸ”‰":e.level>0&&e.level<10?t.textContent="ðŸ”ˆ":0==e.level&&(t.textContent="ðŸ”‡")}catch(e){console.error(e)}}))}))};